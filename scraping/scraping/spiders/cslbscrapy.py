import csv

import requests
import scrapy

csv_headers = ['License', 'Name', 'Street', 'City', 'Zip', 'Phone']
fileoutput = open('cslbscrapy.csv', 'w', newline='', encoding='utf-8')
writer = csv.DictWriter(fileoutput, fieldnames=csv_headers)
writer.writeheader()
headers = {'Host': 'www.cslb.ca.gov', 'Connection': 'keep-alive', 'Content-Length': '7564', 'Cache-Control': 'max-age=0', 'Upgrade-Insecure-Requests': '1', 'Origin': 'https://www.cslb.ca.gov', 'Content-Type': 'application/x-www-form-urlencoded', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9', 'Sec-Fetch-Site': 'same-origin', 'Sec-Fetch-Mode': 'navigate', 'Sec-Fetch-User': '?1', 'Sec-Fetch-Dest': 'document', 'Referer': 'https://www.cslb.ca.gov/OnlineServices/CheckLicenseII/ZipCodeSearch.aspx', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-US,en;q=0.9',
           'Cookie': '__utma=158387685.2019332443.1611051015.1611051015.1611051015.1; __utmc=158387685; __utmz=158387685.1611051015.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmt=1; __utmt_b=1; __utmb=158387685.4.10.1611051015; TS8d13ad08027=08127bdcf5ab2000cfa98296a9966cc9e66afbff23e5fb57aab66cdc6251a3bf1bd38ca33add218308831514ee1130009779aaa347b4f9a94671c20c019cd5d618467b1c8cf188e8fd5938db591e8523a412fd73085e73d1a744cdc28a439058'}


def getinput():
    fileinput = open('CSLBSpiderinput.txt', 'r')
    inputlist = fileinput.read()
    return inputlist.split('\n')


def getcatagory():
    list = ['C-39', 'C-46']
    return list


def parse(req):
    resp = scrapy.Selector(text=req.content.decode('utf-8'))
    for response in resp.css('#MainContent_gvZipCodeSearch tr')[1:]:
        item = dict()
        item['License'] = response.css('.small-caps a::text').extract_first()
        item['Name'] = response.css('td.small-caps')[1].css('::text').extract_first()
        item['Street'] = response.css('td.small-caps')[2].css('::text').extract_first()
        item['City'] = response.css('td.small-caps')[3].css('::text').extract_first()
        item['Zip'] = response.css('td.small-caps')[4].css('::text').extract_first()
        item['Phone'] = response.css('td.small-caps')[5].css('::text').extract_first()
        writer.writerow(item)
        fileoutput.flush()
        print('data collected: '+item['City'])


if __name__ == '__main__':
    inputzip = getinput()
    licencetypes = getcatagory()
    for input in inputzip:
        body = f'__LASTFOCUS=&__EVENTTARGET=ctl00%24MainContent%24btnZipCodeSearch&__EVENTARGUMENT=&__VIEWSTATE=Ilq1nxLBcU5KZOX9F72N7cbaOgVWsJj8fDNsjt4Sg1WnBtFvOzwX1rkoU97NEUgdehQeS1oyNpcUKwxjCJkHDgOg19W9YFvEf%2FaKbGnUPUoOd0nvnSIc7pdAtcmcfY6m4RO9kc%2B0y3i5t3lRPsb48GSlNGyjVUCyxkVnq1Rbq2ozgLeBwd0G%2F2Lxgakh%2B0zE87%2FwY%2Fe9B0sE%2FOSe7iVuzYRu5ensgTLVdw3mwCahvCncmOsW9Fkbbl65y1JIsHuRuBDUl%2FvrwHrZYYI5MmwYDUJedmDEWRZ0TRwjsBO4BReuOoFa0JzdTFu5WB%2BpFSxFrfoZClETuU0aasZ%2B60OecLAlzg6b3ILEJQXuqgqb%2FO0dLHl7CEEYkNAfLCf35wkCGMjXvI0ZYRUfUknB4vQkKE0qVtseK5YF7zj7z%2FhD93yFYUNwpHd7VN5HpVD%2BCaJB2NU2GvrDtzFjTf22183z401fXZdFYjD6OIyxxc4hjFwM9GJ6xDiVDxDidkub7gxvFocU8%2BDt4C7ATz0Xxvja5YrNILZwyz8du3zMEJ6PdaSKxwBCyNskKYx2MOIHlEyGqVaJa58OqsNU6DSnm7IoiYchdUiPDFbzj4eOhzej0EI5S3lfH0cTiI9%2F0TzeXO681hweTAa9yY2jD8ljITYJ42YIpbJKa%2FI1mlT8WmL%2FuZt0fqAnDWuKBML7XaRnjDC2WzFb0gsByw4AgDWCaRCnSeWYfGd65DbXY3vh9v29dbxGK8wukwf8sUGrBIG3np1Dzq70y%2FrXM%2BeAdMdpn30XfVFsjFHucZqmsl4Gb121lMaaWIkEN%2FIuTIeY0B2uYaM32cc0Tx7weMRaj8d6q5MObMTis%2FuFZ%2Bo09Awks2prKneXSVhqq4B8OCcHshj%2B9MCuE8EqejXPSGRdRjnycjf6K3zHfcvHknscjKxtDI874eVCTuY%2FMr8OO542i3vnQgcpKC7uYRi5kdZYxf6zwyO%2BY18GB%2ByQOpQ0Cyy%2Bhu70WJG0%2FEMV8RY7cz0O9QGtk7fopAEWBq%2FvCRSJCK8iX5VU5NJrEZrWfedc749Oay3UNpCKxcPElz%2BEWp%2F9m8Ks83SmHwpq9Slh08giwpUqwdKrktaLweCmUnznyMt%2BAVvBZp%2BUcuAEdrEeksMLVSn2rCxGXZi7911ukvfZsLMexeoR%2F24E1sNxqACWmrQPG7iIxkVy294pq7RuMcUFNjOFRstm4JKwFmviw72Y8dEY9DrOwQGWDBKkadDG8sOegCRlKvXhDjkKbNvTTh8B80gvTeI%2F1ZRv16lVeycNOWLdtyyCR6C3Rvzps49wr2Qsw86ZS5iv0Ex3I%2F0DroLF9ea29CAT7C3b0EkZCxxGJjcBpItHzCrxALHxZSD3MUph21xM%2BgFVf1ENKPK9LwBM9zBb23uwxQuoAEQcidY7UCMMKtGsy%2FwxxvcVVnVWMDB%2BWp%2FfdiMpAAjkHCKFlX2QEGO5O%2Fn0Hj3APHrzavVPsEdvCm5QTejJfJZnwmuJ3v9EzR9%2FpKBSMRnWZn652nY9A%2B9tHqgQwBKhiC%2BI2H12u0%2BW8io%2FmiSFvBL9JYCx0E9SNXMm6Z6ymp4I5lzjE4TC2l1%2B8zPoBHun%2FH6PmCZhNVn%2FXk2cup0jSnIo0X9%2Fke%2BsIJaBCcbDoOagrQ3Bt%2BJhCjL6h0on0PVG0nglu%2BffV%2B4Kde1XJi3TsLYJxmImeDReVKvGWzePWfd1Fd1CE1j%2BWUMo68jaHVSuai8l6xwoLcHBLQqd7epDQ0ZpwxO4igeyh0SRV6uRLnsNyfe9mJUWNLnAHbDZvL3LrTb4if57VmEeFPpa5uhwynfZMXG09B50r7xpX%2FVjZDuz5Ci4cZQL5%2BafqQ3LyEYk37SqgkBkjzFSszt7E4QoeNssSUXHxhq%2FjTQdUkbo65%2BecISFhuSdSvPAdBzcDaCRIQzyLIs49kqUX5etkIlKEUtP9IiaODAcoHaplbVivU5tDZdscugWNACW%2FCQGwmdvC5XGs2km0GSaqlVWEpsXq7aL8y41RpJhFOcCfJAbOM0vFIlJlMDARRn3QtKBYzOurNeM4lUZ1YwCbRYgEnczEqrJJdu2eZ2cAdjd4Y%2FSmxqPR5zD2rueSntBFoxTubfndRvMmoW5jSNjM2Noak1QTf8yAlIBZcE4jrV5wmZyDYHCO2r5zuqpTGCArC3akKtSIbuLTz2j9JNjrGixZI8L0qrJhPErtqnP8meKE0sCBqQ7e53gVLWfpYguyI2PkYWea%2Flc98ExrPXt8ZXKeuD3J%2FMa84KFY0M8XkJaY8j%2FBjFrPtcO33rJLs2qE9IooNHkUWMDrJKbckxwEcMC3IMuQpcxWewL3UwWily89fDxrmuYUR6V0cgw8hLw%2BjNE63rDi%2FYPjW6ddcYKHUyTlvjjzTv8QPfV7i1PeCSBmUIRQ01yOXpnWSrPXa2qOAhg%2FyZaopmdRDo2yZS9ai0834Gr7PtnwjonjUsNAnf3T1nCHI5RnxPqRLITix0GUS9jf8x2pzjg1YeMBxsXMXQre2XSt6zWSJOXC9BHPVSEipky4rzNcrx6VXnCA9qLDE7EtIBx9uuafLTGrwT7FY3yEgZCj%2BI5k2cGNYXQ%2BiF2oCpqToypvcJeW2YhDbHLRP8pGHGnVLNfp4AfO7HMDbUrjpqExXmYnGTeK8oyUWpgUg%2BOTIpa9oe%2B7kllg7qumdTOv5SDjT81CBHk32zO%2BTLlDXCuj7AgwkZ6paMleKX%2F1gzCuYPQCB6CjIJCpyuZUww0jQSuP9tnOq5p1KC%2Bfr5fW4mH9O6qp4mGlWNwShBwGjBzwX2ES1DISGwssCLWSa%2FY%2BY8M8dBvSG9M%2F4L0eyN3T%2FhlE8eo%2B3S5hbmEzXRpsx5vG1aJPD8FOIBo9w%2Bxd6cRP3HCndRB93K%2BMe2O4NPu9KpQplinb1vnCLF1hheCAjACNPGJygpOqgLLXDVhcpThYd8XgeRCIs%2Fl5eKmuWnka3Xk1brtFooAGAgLnTq%2FpC0GZZpt%2FfrutKWm%2BqR7uc0p9EcWc9Zb6PkveN7g196DMd7NMjBeKaWnqIs1xE9VYqtLNvEzhVvhIzqCDxiwu69Cs%2FCU6L2oqVwpWEfiEmUtzg%2BvCGJSdQYQC48%2B1gb8i1bueGPlBQhTVzp%2BL89XvaGmtX7bqvjAtv2r2RzWsb9dlRMOz1OUBvy5pV3pkD5rUgIWDM0j6Sr28BdteR1PVExRDos60ZYqE7ydBG9usjmtb4lgriQhu9Vghc1RKYhKC%2F2lkskhPjCvtuv0arosBDWcRQSPhVXDGowVwjty9SuXXseR%2FaRLVciikwoMCmoDwKQO1YsGc%2BK%2FQRIVkuPSjhpiBcUudMq7WPMU140FZU9OTty2bwq9VUwj7JBqJzr%2F7DwHJyn7wI37yzCLE%2BqU6pVtiBTjGedcgOySWFL5zQ1s4cYfiyc6S20CFENfR18J4%2BEWJk%2FlF4sQ%2BogK6QG4GuqQWEkBLCDcOdHa76N3qqngtBiiz7Yn90u6C9FfMi%2FLTPr%2BWvmeQnVOQ7908SWhOsnmaVisJNlu%2BDJVzi37b5nkskWZUNf1UpAQYhtTdhz80H2%2BLNQte%2Fm4QrewWwG2228l4DRHPo%2BDi0iH0VV79voIFDw%2FWSS25slSLibifCUucSb4Hr33ZEljCS2FA%2BclFua4znL1lsdRamhohqTbAeuSOlPQhWp4UUOhTVLc3XeRj%2FhDeH%2Bu7L45scpVrCgmnAuVsOq%2BwkRtwR6FM8HxK8tEke7czLJJJu5Hv96kL7j2bOEn4IU8OoCmGHnxzLRdTspJSX4qJgR4n26lmRiYV50czqFHD6d9VZwaJHaCLBEGSqNNFmX05hn8RoqN1zxzRhoqVZ6Uv0IHuBjQft%2FVPC6QLCu7UhCUftRZf5kRJnhArt14WtoxZStgVmBlY1VxyfQEzz9mXLG2UJHKnY1yltzDkeeNtIfN7DA33GvJ0Y1eApkh9Gvj6XOisI%2FdjpNeR3Dl5OZkWrH%2FyGke0Q8NYIIGTB5%2BpiLcRdRNTZVWH8TeAn3T94SOK4Y26ULGvfj8W9%2BnRwE%2BrpVKygk2iRTHPJfp3kyhbJMW1Hk21Cfg28ZhctP8qKmuRTTNEGR8ZyC4v4dYdHY3gvWKGRbyV9avxr29%2BlAdnAleXOsVnYmXChZkV0%2BDTJhzxKUI4YxGxq%2Be825dcNhoNSbb27e%2FPVM5qNDcxKksrdeTFbLSn7%2FWQRlcsKO%2FjT2JeaZgGsYD2oYZN7ZALmU%2F%2FjEkWwTs4481yoFhM8nbNXEsBX%2FozvNQzGBsdDX8t%2BaYZxL3sxD738cYv0Ps1mOy3vPbrHIcgzY02cSs3CfFHntQjOKfR0PaVx%2BZ4OTgN03%2BRssMbfXeGYvj9SDpfePpkK3dZ%2F6CMCFRGdJ6AnodgbVV1GEnuEmkuV5e4TM7pjwHZ0m4wb%2F52mEhMvAOBEvMEaJbHmTbLInmhyZ70p7kFifslNaQD2nC8skkvhckzRK3jzOMFadhyh%2BK3sXYkcRHw7n1MBU%2FcURzpUOBsLYICvTx15yJRCHfs7TkDHU%2B0hQZxQBRqLe%2By5dcMc3HUIdLcFdhtVisYWb1Sn%2BaQ051HxEtsp716V8ssfKY0d%2FzapuMEP%2BuCNfp8sep9oza3il8nE91sWruka%2BwTmjBUG5PEoEF0qc9rzvgrf47LqN%2BeoeyQYTlbQpZWc1HByMNsCPZY5FNhACQ6oYAHZQXEZpZF9xqIMr0%2FaLIgkgQdVPDc0JBN6sU65w0dknvAqUpprWaU%2FQIcCb07MkbGakeg6lPy%2B6lIBQVBfvipGH317nkKKZEU4fH5hIUB0T8R0UIQwzipqeWFkLERVTcEYv07s3xzwEXl3CaOrldrzQx4oZenKWaRjjl9rtgLwPlmAHrqrkltcJHUtcFM6Q8BL7EXBh7htBJhg1zF8%2BQLhATJELk9ot7VbNlYHxffImtNAWXjS3kZyAoN4DtPTrTd%2B5S3rrcKxXgA5zmjywSGBKx6QrWjInznuehlJLYQ8RHAQwWamx7iTQVX6bZXViKnYEg0yWlcR1rVfp1a1vtPwUcP5JBL2dzRZSaFXtSIKdPVzYiAZHSfhwheu6CNwei0CIKy51wrGBTzAkCSLI3wukGNpl%2FeIoe&__VIEWSTATEGENERATOR=AFD32C62&__EVENTVALIDATION=lCzZr1%2BspteOv9F7j9vjZd3L0wd6MiA2AWKsUvgpBCFJYA3OOyMHyIVGZubKfjppX0dh2quGgwSWSzFf6QFYEzh0Wlguo7mp5W6iklsKGnuGhO%2BtxW0zeOt5NoXmFfwSJwZ%2F8w7tB19001NwwctLqQGY%2FiTE69liaT1vjRb%2BlNdOZhoV%2BffF1bEh5g00c53EwdXlPSAyVlnDn3F8vJmQKNHT8AzdRrBKpuHXwsRastjWXoh8Pnq%2FlkAwSfQZyaZLCDMUmQ%2FMnPKHZn6PbrNeGza%2BpXrfwfV03S5Q4L2sxk3DW3O7eMinlgqYQZAPaUfbAR%2BnmvEloCnlLJbidv9%2FBAjRtPRxoXuZAZ1IeKil6j9JkCzWyFnhPWYn2AwOgCyFLqDLa2QgZHLuFiS3Qw9PG4YRSpcuLGseOluKRSW7Yu8WWcoiusMzNcZxvxUXzXnY1wAK4gU4WDmKayUE5F7LFdouSGkTbTG9%2Fi0l8s3YT7oMW5Xispr1V5pIXVz6X%2Bjh6ym8dSNVfxbXTxEb6j47Btfzhbp%2Bqva9KgMUfFtOK2j2HUXbkfTj6A%2B1o9yce1%2FAK%2FMSCbdydLM1xlOXa97Itt9pzeOcW0%2F%2FF2vHNkBjGdplMak59G3MBphxz8i6Iw0HCEJfrsPItcd0EzUIOeHHP6lfJl%2FgWW6R%2BTZmcP7%2BRB7VeTGi9v2uQhO4vSPk0H433nd%2BV7yM%2F4hHQVrwqW1AdSonMbS3%2Bqc5EuX02XYc9SAmwZp2DnBSuquRFTI0dGdpqUIQ0Hvo3y1Ws48GectW4uFSxyKAMvpAxB%2BPRdr6yQ%2BGX7OrqgYsknLBi2wl5%2BKGP1JORqUlrzRRM35mkkskuwsUJC2hIxHNFNLhbHPmJSUTKMQhvIAlvdHrnW5F%2Bj8xz8kmybMjXRE2Y4M4HKz8%2FZQSW08uNTJYvZRPP12vMxaVfnXBLSYQmFTuu7WuXQmVMOKK9IcLl07%2BiYq0UA8qA79h9JG52L4kF9PBcKe%2Bd%2BsQSAdJivqA2LCcbwRwkG4fVd661WCtNPHVyaPoLO3XSmBiw6QdPHFqWjKpCUqbe37kF61qHrlRfNYt%2ByBaseQALHCfMyXyvZGZKbd5HL8EM84YT0lEzFeCzEIUdRW4sx8O%2BCBEzFDqkM24VCo88%2Frfq%2FqwgiuS07PgwctYvSnXv5MbyG7RCgKWGr5qvkZ5yhX3909emD%2B35Kf4SrFU1mYuI2KsPcnjBWRbV0TWje7zZOi7Qa9l0oW7fmgtioe68b6t1QIn7gILg896NGwfFVkfcKPHBcaeBTsMbwRkrbnOAtz3ae0glhp5QNNS6xe9Y7etBRa5JKkbqAmAo0E%2FTrRUrj4w2uNyM9CK2QUMmj2qi%2BnizuSqhT3DjA3jToSPy1JSC7aTxP%2BWLf0wZPJh2%2BwUg5On2fk1D2DzGE4Ocoyy%2B4zWpMvS0VYPNEylIqf%2BAqRJ6Qizu20dmHzzkvxVGdYzVLtW1idpXQod5WL1uXQHAAu7DqNiwYj%2FkOrB3D%2F9eTL69q2Bs4ELm7DQ4QdubOULVlrzwZ9yIBv3cxXKGZkcH2tkKep6mOGrK9yd1u3PMhj3YWZR3nvE17oXn5xbIoj0K2cCtPoiqI5zmkkjbkGUuthNp6K%2FnpS7NV1%2FfFcuAb3AY1m6ITe%2BfEalYlT0VmHzhHIjzUk%2FpK5Em6Xvufsuu7Gp%2FbVP6a8sj162Nv5Oj%2F15nbJa%2BJDGpvwbtTaEMMQIRMO5VssudlzqO8VvQw9xEdK6iqoy1l9OcVUetJVpygkVwiY%2FkrvreGR%2BgIyJTsHOR%2F2Isw%3D%3D&ctl00%24MainContent%24txtCity=&ctl00%24MainContent%24txtZipCode={input}&ctl00%24MainContent%24ddlLicenseType=C-39'
        req = requests.post(url='https://www.cslb.ca.gov/OnlineServices/CheckLicenseII/ZipCodeSearch.aspx', headers=headers, data=body)
        resp = scrapy.Selector(text=req.content.decode('utf-8'))
        parse(req)
    body = f'__LASTFOCUS=&__EVENTTARGET=ctl00%24MainContent%24btnZipCodeSearch&__EVENTARGUMENT=&__VIEWSTATE=TEaEJSu4ODygAFNsJOcCok0CVZxRrs1SjZmwPMOO1r6uzPHMZ1jjaeHKm2ql9VOHLlgYJtZtVGI78xJ9UTx9M5oeGt3lKZ6Y8%2BSQ7UW%2BhdvdXmfhgS%2BCXMluxmujY5ksjld0i%2Fe2JX%2F35WE0sR%2BlSj6RAxPzjx%2B7W8R7oaVFcf87%2BrzUFG%2F1Xu%2FuEGrNdPezdTRGfqDeoptov8OS1iGJ3ZlT901bKpDi3qR9rJJhkVTDgnse5i9Krqu5wvvQ681BPsJXy6ETra%2B1kj%2BsdDkPopTLry%2F3Kix%2BaxMQ0EF7xmsvv%2BmVmj4zvm0HkZYgB1o1KoXDSdKMrAPfiosqnfuQW8iAxhqlyDGzGEAsA9Zjv7FszjElmGFY2AQDdEVt5RbjEUyd06jiUk3E1yAylVVfT7BMDf3WsmWKf0I5fIo9H7uEkGniZkl%2B5Z6FbXXLGp7NB810z69DvZ%2FydO1HWTFhEKnSZMQgDvR8HtBQuJszZfYX%2BMuzu33T8hHLFk1XkPKdOqnKKmrmHTDAsGlbx9g269GPp0wv9yXwN%2BlA4UqDpbQDS2DEz6eoUjl2Two6Z4MDyQUzhyGREF1SbE7i%2FmUWk6YtBxNwTjgsJQV7mKHVBrmrGHnQHKwtID3xZM7Kgio%2BFdHgt8ds6F4BXk01y70eGLzSU1EoOw59T%2F3ehL%2FSSf1cwTVMBU6%2F%2FKhq57d5edcGlezt%2BT8InpjJRb3QM%2F9DqqZ6%2B3v%2Bru%2FrPyvOHcNpBBGX%2BnHhb7QqU8wQIcuZw8BBxvnwEVLHs1lO16o3lffuhEZGQ6SXexd%2F5Gzv%2FJh5TsGHcbwUczj1GWFfjDxrNgU%2BaJV6Jdh5V1KWt0jwuNw6ERfgrs%2BWEfddUrqtZIl2xbdo55wU4UVS%2BkfaYc1jlkuR7MjJHZZtDyhtb9eqAW8fq3lZZWwAGUiN4Cy9j3U%2B6vyzftDR6ucfX42J3kYUk3j6Zi02YCPxFn6nM%2FCs4Gfeo5qzojMmzwq3ewQKGs57%2FtLzFtFeTMKaYKiCyD0Iv2zeeEOlZSbRk3XK2ccD6Pa3oULrsKFjWo2xebTgtVLTscB4GtLE5ElJOn9QZRFw%2FER%2F5Q010nYI%2FHnB5LB%2BubYZgcQxIv505lbzOuTZKNF6c0FFPXmfnAEvVEzvUD5ZVM3FAg7P6bcygZcYhWqOr9px%2BJdUpo7CaM5mGIEN2Q%2BFJiroF2d70J3uIDaEecR284IZ%2BkT%2F%2Bti7DLe5d9uZXwvDz3OH5fryF75npPSE4%2B%2BLFhif0ykQnH7gkwGRRlCHZJ1e8HJoFkyByuRh6Gp%2BUyUzFv7QRqDYho4kJwxkpxawOyXPR7wbmwM%2BLizkfUCvl7bTxT%2F5QLiRehwvAKFYS76nzIiQVmB1luZdrD6ItIAGlpGld5ymwVlY7tOUb7JlJ2Y%2BeuubFwRKhkIraDMumEokkcS7F%2FF%2F3%2FwqKJJc7CUQRv7qTSh0rHb3XW4CywrpMWcxKFMgZboO837PHyivPiGxklma2ShNJaOsyTBb7ZCraRLhg2QtImgVK3RUtXo8W5SvGn2R85ybY1KY0fcxLGC%2Bei0QwQYsk5ccEmQipKhrLP1sPXDM7CcOBKQZWtG72F1ArxFoxQxCHAtjROaXftHt6hLjs5VCsQ87MJBJM%2FZwm%2F4DRwDq1W5ezTzuOHNrB%2BY3u2HJAPqAGgUAkkzociFl6ZO4KqXtsT1FaFPDTIZwc6Qra6bJePJZGkF3qDRSw8N%2BQFeDXSLpGia1mVyNZL8ttGGpdAgXtSzRE9GRvF1KB1%2BRzIwWcdt4viOPEQGZwDIBggQjyqL3tX0jeOAtMiUkerGzivNwVb7UE4if25BF5OkL%2FBYd5KsOtS2SW0EnqehFkC5riFD47thhe6WEH1bbHCLmzUzXLY4LLAZFu8Qyyl9oHz5Cu%2Bp%2FnQCkINFvXIrF6ezuhMxiu8fuFQ%2BHCXrxb8EMf90XXcCzVlV6HDn9YPZwyR1u4NVVu%2BVoq%2BMM%2BDTZgnqoOfRIQt3kX31bnZA6Xkr2lmd%2BNrn7WPTjGo6AjU0t734EgHkiyavOqMHY8YEbVMEmfEQ%2FalvheQV%2BcE74YPKutDqR6R2KsYylkqmDSA7hUCNEjAqmZUYfHtxLZIfmMdzs%2B1n1NuqOC4arkXmLvNvch1WRVAw2TBtjH%2FfO1BgSymt%2B6TN0jBPMYf6CtZ95yhz8AMLh4m%2B7gU6%2F7fWnE3rrg1uDbkWFRESsdambI4mRkXgKgE1FdbNDtGBqMMvSBhzp1sZFjrdVo4jMum3rvEL4%2FgWyQPF2L2h1RDqToKqhGShAhyIco3bAgZdhmPSS4DYxiNn7RWPiai%2FQ29Xcvg5cGbOvVc5iX%2BpSL%2Foiu8MiOxkoEBMH455j3e%2BbQhIAGYSplulPhhMBw4jRQh1kfnPDwvc%2FTUPc5nhnaDg1JgFcevIFwtZ8pqWzsGiet%2FwcrMfLPbdqzKq%2F8p4z6338mEnMNSJU1XyaYTklOtv8%2BeZMKQtgzrFTmMzZnPRpxJr9EgMzVV4oSC%2FJV0UDlUN9ONkewEdov2Oxuaw6yVLYDZtFMc1mMbVOrCUUtwzIuPsLIwspXTuO0fNbqoHaKVfbIkDksVwzeoOJXnKFcyGXmvqQTthPK2oGn%2BrEGp4sqBrWXsA%2BRGSSdcJjNp3bPDCD5POeO%2FK9sPfPqODMUjOfY2JyEyqXHNEOZw8te2KiFmTw4zMI2TNMT74sGLCxxVCREiXdNkWkAzc58%2Fk3q8q92UrIDyeQGAcFg1DoaGwBGbHP5nzu0JaIq93KAHSLV%2FaZjO0WZ07cD%2Fq06yPYZj7X4ZM277GabXuoFgkJLN9Ej5sV4E4ASVemwGJ%2F3LZeV1jV5k10rSKzEYB%2FoJSDeCUencqGTnyGF55qwQcECSlNJGWIPkjBeKjukaPLqc7s88fAmQGTogzEXT9ylzodoSlDh33J6MBYDqFADp%2F6VawtjOM9SfyYu8IVSa94ImNs%2FH9Gg%2FXL1W9tepZ9dSjgv%2FebNPB54VyT%2FW6NDi%2Bl5sgOHt%2F4E%2FQsr0okBtlIhPnN7%2FbdHglwQZU0wm1qJUcUJsZpbG4zSiAS95vs2OEb33h6kFyKK60UF%2B4GQKZi2U%2B0VXPd84b5RtvwwmGyb8u67oeRH23NB9qn79FdOd0i95sbiXE5Q8ftkD4xLOAMjxWXR2LAYq8%2FCcIME4%2BmT40slTMED33kg4zlBhpTy9hS6XfVh0Z6I6%2FWiiECyB33XafHtpyniQAV4C4Q6lu7o31dBHsUqulBiQPPYX88d5UK03Ef2gDwSP%2FKcpcISw5lOti4YU0UJ%2FEmqpxnX70BQVmz93zrfMEZDzAWi3P6bsEEk7yp1S5XrYCSRZN%2FPFpwaJJOFFBZwJWXZoeG6MwtphWMnTwMolVobf1xwYfNAdWjrr8Oz%2B0CVVb5GXt5JVjfiqeh3X2xwUCEMyAKsGyEUWg7iRVe5DnBG%2BskqGJVaKnyvUi4pkIceH6rYE%2BSlnWYn%2Fu8ZeJ3n8S%2FWBOSvnzRrQRNOWj70sb7K5KkI3h%2FIHl9MlbcGXzG7zDR%2B%2FcqID6AR%2FDW0JEFYtmgvNqUr%2FBDYH3OACTI5Yl46C3JWkFi5E%2F8lregUXnHCiqeA3kLWaGgCaUIA0ToK3TcSMuJH0lRb8LSxRzGaxI2ZyoySfM3Y57ahHvRUs7Y2wHGHpFDyMwnQmXfB%2BVAy5Y4M3vFuhDceFejnlZFAguDcv9G%2BLYVBOu3DZ%2Bqj4jgUcoUrgX1R%2BNnbINOVTS7B2emN2ZOY1sVL%2BUPxRKhf893xN0uQh%2BuhQeG1PdYqXwPRdHXy9%2Foy2zWRZHJWsrZ9Nflf7LAbsa2ZoJ%2BPaPdUlXW8a5t%2BMgvge9WlJiZB5AOPXQW1ncjNsgm8xxaOG21hS%2FpzrjXFu9HnQW0rTm3HRwED6JOvX5Xkm%2BVnd6cqPbzhVpHJ1uuCS%2FPiEnDIvUfItucO%2BKFQQGuIyA%2BSBVQ5aVOFlyu1D1SWP04MQcP%2BlPLz6GKwHH4vsd%2Bx89%2Fd59UkluUzbuWGR5TaqhOa%2FQsQJWoXlMGccEXyYubVfLxbS31yXB6MmV0%2B4fSXe%2BfjqqEfkxKOfphswwz6F8c%2FBTuOh%2BMZKzJOQoQelDjrr54vzBS%2BKLRZUM0rHwI5wsMLxaMIk1rB6VDrObdtsDFFioM3rdhufISQ88rob6IHfRpMMWXI3a4Npkljz8Jcsa4haoDnfEG0unredD%2BFofZ1vEcTe8P0XZ52fO1DDHgZGeeL9UzVQoZ15ZlF62NqHkwqcL8cGaZSb6%2BgX4A7jjxM7dQIacxmnZXu8mE1jMX3vFxnp9LuMorfuDjYRUhAIPhCQddi3uA1jNF9f7kGuAHd9hRpiCmk62QAAS%2FX6fM6l%2BYr8bbQTlA0C9KRdcbG%2BXVzTg%2Ftt7wxPLlEVEhnui8LqMPmXouWQUNhYWa2IeEHe6meHTyuZ%2FZMNY8i5ltLxjw8fjn0TmU2VjwUdL8isWHrhoDwqAN%2BPhNIzqp1NLoJlAQ1fub%2BAUA0Z%2BCV080HOHLdguZgR78l3i%2BXHrFU683vcLgeaFy8%2BoxS7rPpd0%2FU%2FWHK7lh73M%2FLoRQVvo7boYOtw3HHslDalTtw5W0ltWayorsPEudXfpV3Ri9a%2FR2SwXmPNA5hJHLKzkKBkldRd0Z7oLaTDB4fbwrOlB%2FJRPYCnW4c2dQL8MSBxRoXWRhVHC2EBqM4h9U4KZA2CbwmfEiOWhm49ALr6tg3tmoy31EjpfRPCn5WKNNxn3ucbmzhnG11VuG2nSkzBiWJjt7ucswT2eadu%2Bv3kuTa7LlXUM43hBUrein3bimqAvCaYL%2FBRSj0lckxjRIcFx2MOTmdS5KziPPW8wJMc%2Bh7UPXCvxqgURmE1GosJQI6utLOGsbNweP69Hd5zBVKuHSKQoiSrR%2F0YMYD49%2BU7txgwShEm0Tgy5E3AjqPEcTnSaoksKFTRSeK5tb6HJ8NJLqERHU0b3wIDPHm1nAXrYwjX18fmr6dsFTOeDrEDCUfZ8A6AI98ufq2ed04EczkGnO7zepF%2FoF3%2FbLzLdjKKjsrxnHwwkaO2vHtnKHsMZZ%2FB81A0KfPlAx9CuMSfKhh%2BZD6qMa4yuKpkMDYvI1uAN%2FHRw85kzEd14euUFiqXCD&__VIEWSTATEGENERATOR=AFD32C62&__EVENTVALIDATION=fPTK7kLZwsUjEsY5qYnie1WsWEJQjJ%2FrVnWhuhxrtA6O7w8ABZHexXJjKfn0Stny%2Buos3bv7mpvuO1h9aRvblzZxlj26UAs6fR%2B1xjrq3RvGf8pjOzfHgOeSdmTebFfWSQt%2B2dBTkEglZGc6FA4Ttrmdz4%2Ba3sqMGXLTwnuHZVcCyPpqkfJ77%2B%2Fbb1bRKAhwGES2%2BcjjMDbqT8%2F776CqgOfxGbVnfyOxpXj%2FIW1Lf1YhSpNchUcLu8ntrL1sfWvnKgIfPTzhJJ3Kz4eiKtFTRR3RjO2Ro%2BJUsXbhXRP2Xka3H%2BOhKocokpmnMOmH2mfvqcxpZwtfCp%2FZHN3jyBAKiRF5Albqc3Qw%2F31eivNB5X9LjyEs2xhRg7IyyzFS5zA5jo8unnJdDvbBYonYR%2F8fCDp4GQ1KPvRYsVSpj9FGdA5xdIy2G%2FgPithU5DTsVHX5jxAAjxr9yqVDSijhtvZiop2JjH26RfuFCFuLGK4wiSru4mjK4EjhHbK8JhRyL8fxsOprd3fhLI9TJpO6Kwn20nQ3Dcxw80tBM4wYo9uJrYEt6OPavS1CNr6Evt2kGJZ0%2B3p1Uh1ZLJ3OYF9azwisjU%2F5bxUeDsr%2BAe0VJWo2%2BJjHYc87EpIo3p2fkrT69w0MIezr8HzSgV8pDnGICjdV9BRy%2B8ixN49cPsFRs%2BJx37UT6S%2B%2FBdGK09pAFPgbr%2BSjXR5d3JGCtRvg7KflxBxX2hT96lVgM4e0mTYIUXCUnlNOHB1w9LR%2F7gipwVgPRxoFIoLs%2Fuq9xAugWnOkoMa2dlk9v66tqUYOlNEI0khlbMJ8m8hAgmROCLOC96Zh97PEhgoPoVed%2BrKcnGnzmvVvSJk3UPjh4YfEIXzOcUlcEyj7G2NV0eY3o3C%2BnnGxWTueIo8S3RQIlwiax9rjYXIVSqyOhEnfMS5BaZqzmGH2aw31D6XqJO0D0mTZmd3UUjXCL9oojoskODFdzdROroqjKeDxTFlzyVPIOsB8zt0mehu%2BsrqRDNgccBx6ijmwVoNp9j7spbtEuVLrO62ojAn5p%2FabtCpdmoV2otev13sbnXO8uozc%2F6fs5r1ZxvQbrDy5mWF%2FzpPVgusIWVVh0rEk2gfGVicdxoKu%2F6UihDR%2F3JMCjrSd%2Bqm4hSaWZiUsOD0x7Ez6%2FopT8tyhUlOzEQaH%2BLpgRUjqNMhoxDDUhbd2pRgxnohN8K1Vukp6FcJovVhMvVM78u%2B52%2F2GwxagJp3%2FvBT32oLMkGR5OdzXxAsSkRpvkqU9j3ad4qZhQYLh67RyXLY5W4NxoK%2BqNuD3aQipRsQUTs48Ukq%2B7FyRE9TIShQo23o8IaYhV8fBwjc60QOaZkvkHVvUPY%2BRSdnH8aBhNH9usFVEUUOqXP8XG5yc1CAHWRU%2BuKjKFqa6BTxHRILxo3mUyeTAzaeRiWVJHb5SC1MEEctwe8B0Np5dsKc6HGxJPbK4hPltDEpPPgKLr1C3Rd%2BBaAZKBfbPJxyXyOoh7tQ1W58RkeFwa8zqQkUmzoVho4Xv0aQ10qDWroa9KV%2ByJ4OVUBqTpaIlkFuNihgXjRn2ZS7Cpyz8tOrxPi2R3gZIUbv6ODhxnP1%2BFyvgvvd%2FEotrQj2JDyNz2tyRspnybCtp%2BOlUtF6ShcKQduh3Erku9JNVpGVtagE7UCUlK%2F8zviBERlX03bcwFNrDVDZn4o8O%2FWOZnOSAtoAyXjcb5ZJitgvM%2FewdbApE30zjFeb0VqnPapisW5LSS8Ja4FOYEwp9SBu0Mh9wrAfwlNudP0ZFuBq7tqqRUaAhtgNxwa4HrK8bOw%3D%3D&ctl00%24MainContent%24txtCity=San+Jose&ctl00%24MainContent%24ddlLicenseType=C-46'
    req = requests.post(url='https://www.cslb.ca.gov/OnlineServices/CheckLicenseII/ZipCodeSearch.aspx', headers=headers, data=body)
    resp = scrapy.Selector(text=req.content.decode('utf-8'))
    parse(req)