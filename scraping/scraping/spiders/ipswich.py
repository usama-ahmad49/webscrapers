import requests
import scrapy
from scrapy.crawler import CrawlerProcess
from selenium.webdriver.firefox.options import Options as ff_options
from seleniumwire import webdriver

import AirtableApi

processed = []
basekey = 'appJ3Xo5EL7C6U15V'
apikey = 'keyFHOlT21VKJdBVi'
BASE_URL = 'https://api.airtable.com/v0'

table_name = 'PADtable'

airtable_client = AirtableApi.AirtableClient(apikey, basekey)


class ipswich(scrapy.Spider):
    name = "Loganhub"

    def start_requests(self):
        global header, cookie
        cookie = dict()
        options = ff_options()
        options.add_argument('--headless')
        driver = webdriver.Firefox(options=options)
        driver.get('https://epathway.ipswich.qld.gov.au/ePathway/Production/Web/Default.aspx')
        driver.find_element_by_css_selector('div.councilService:nth-child(7) > div:nth-child(1) > div:nth-child(1) > fieldset:nth-child(1) > div:nth-child(2) > span:nth-child(2) > a:nth-child(1)').click()
        driver.find_element_by_css_selector('#ctl00_MainBodyContent_mDataList_ctl03_mDataGrid_ctl02_ctl00').click()
        driver.find_element_by_css_selector('#ctl00_MainBodyContent_mContinueButton').click()
        driver.find_element_by_css_selector('#ctl00_MainBodyContent_mGeneralEnquirySearchControl_mSearchButton').click()
        header = dict([v for v in driver.requests if 'https://epathway.ipswich.qld.gov.au/ePathway/Production/Web/GeneralEnquiry/EnquirySearch.aspx' in v.url][0].headers)
        del header['Cookie']
        for i, v in enumerate(driver.get_cookies()):
            cookie[v['name']] = v['value']
        del (cookie['_gat_gtag_UA_151114934_1'])
        driver.quit()
        url = 'https://epathway.ipswich.qld.gov.au/ePathway/Production/Web/GeneralEnquiry/EnquirySummaryView.aspx?PageNumber=2'
        body = '__EVENTTARGET=ctl00%24MainBodyContent%24mPagingControl%24pageButton_2&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUJNzE5MDc3MzExD2QWAmYPZBYEZg9kFgICDA8WAh4EaHJlZgUQU3R5bGVzLkF6dXJlLmNzc2QCAQ9kFgYCBQ9kFgICBw9kFgQCAg9kFgICAQ88KwANAgAPFgIeC18hRGF0YUJvdW5kZ2QMFCsACAUbMDowLDA6MSwwOjIsMDozLDA6NCwwOjUsMDo2FCsAAhYMHgRUZXh0BQlNYWluIE1lbnUeC05hdmlnYXRlVXJsBSUvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvZGVmYXVsdC5hc3B4HgdFbmFibGVkZx4KU2VsZWN0YWJsZWceCERhdGFQYXRoBSAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0xXR4JRGF0YUJvdW5kZ2QUKwACFgwfAgUMQXBwbGljYXRpb25zHwMFF0FsdGVybmF0ZU1lbnUuYXNweD9pZD01HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdHwdnFCsABQUPMDowLDA6MSwwOjIsMDozFCsAAhYMHwIFD05ldyBBcHBsaWNhdGlvbh8DBTkvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL05ld0FwcGxpY2F0aW9uLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9Ml0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBRBFZGl0IEFwcGxpY2F0aW9uHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRWRpdEFwcGxpY2F0aW9uLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9Ml0vKltwb3NpdGlvbigpPTJdHwdnZBQrAAIWDB8CBRdBcHBsaWNhdGlvbiBGZWUgRW5xdWlyeR8DBTovZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0ZlZUVucXVpcnlUeXBlcy5hc3B4HwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdLypbcG9zaXRpb24oKT0zXR8HZ2QUKwACFgwfAgUTQXBwbGljYXRpb24gRW5xdWlyeR8DBT0vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0FwcGxpY2F0aW9uRW5xdWlyeS5hc3B4HwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdLypbcG9zaXRpb24oKT00XR8HZ2QUKwACFgwfAgUQQ3VzdG9tZXIgU2VydmljZR8DBRdBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9Nx8EZx8FZx8GBSAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXR8HZxQrAAMFBzA6MCwwOjEUKwACFgwfAgULTmV3IFJlcXVlc3QfAwVAL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0N1c3RvbWVyU2VydmljZS9OZXdDdXN0b21lclNlcnZpY2UuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXS8qW3Bvc2l0aW9uKCk9MV0fB2dkFCsAAhYMHwIFDEVkaXQgUmVxdWVzdB8DBUEvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQ3VzdG9tZXJTZXJ2aWNlL0VkaXRDdXN0b21lclNlcnZpY2UuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYOHwIFCUVucXVpcmllcx8DBRhBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9MjUeBlRhcmdldAUGX2JsYW5rHwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTRdHwdnFCsABAULMDowLDA6MSwwOjIUKwACFgwfAgUNRW5xdWlyeSBMaXN0cx8DBTkvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvR2VuZXJhbEVucXVpcnkvRW5xdWlyeUxpc3RzLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9NF0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBRNBcHBsaWNhdGlvbiBFbnF1aXJ5HwMFSC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5TGlzdHMuYXNweD9Nb2R1bGVDb2RlPUxBUB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT00XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFEFByb3BlcnR5IEVucXVpcnkfAwVIL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlMaXN0cy5hc3B4P01vZHVsZUNvZGU9TFBBHwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTRdLypbcG9zaXRpb24oKT0zXR8HZ2QUKwACFgwfAgUIUGF5bWVudHMfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTE1HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTVdHwdnFCsAAwUHMDowLDA6MRQrAAIWDB8CBQtOZXcgUGF5bWVudB8DBTMvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvUGF5bWVudFR5cGVzLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9NV0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBQxFZGl0IFBheW1lbnQfAwUxL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL1BheW1lbnRzL0VkaXRTdWJtaXQuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT01XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFB0FuaW1hbHMfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTI5HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTZdHwdnFCsABAULMDowLDA6MSwwOjIUKwACFgwfAgUKTmV3IEFuaW1hbB8DBS8vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQW5pbWFscy9OZXdBbmltYWwuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9MV0fB2dkFCsAAhYMHwIFC0VkaXQgQW5pbWFsHwMFMC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BbmltYWxzL0VkaXRBbmltYWwuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFDkFuaW1hbCBFbnF1aXJ5HwMFMy9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BbmltYWxzL0FuaW1hbEVucXVpcnkuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9M10fB2dkFCsAAhYMHwIFCkNvbnRhY3QgVXMfAwUXQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTQfBGcfBWcfBgUgLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9N10fB2cUKwACBQMwOjAUKwACFg4fAgUKQ29udGFjdCBVcx8DBRJPdGhlci9Db250YWN0LmFzcHgfCAUGX2JsYW5rHwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTddLypbcG9zaXRpb24oKT0xXR8HZ2RkAgQPZBYEAgEPD2QWAh4Hb25jbGljawXiAWphdmFzY3JpcHQ6IHsgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGVNZW51JykuY2xhc3NOYW1lID09PSAnbW9iaWxlTWVudScpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGVNZW51JykuY2xhc3NOYW1lID0gJ21vYmlsZU1lbnUgaGlkZGVuJzsgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlTWVudScpLmNsYXNzTmFtZSA9ICdtb2JpbGVNZW51JzsgIH1kAgMPFgIeC18hSXRlbUNvdW50AhYWLAIBD2QWAgIHDw8WBB8DBSUvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvZGVmYXVsdC5hc3B4HwIFCU1haW4gTWVudWRkAgIPZBYCAgcPDxYEHwMFF0FsdGVybmF0ZU1lbnUuYXNweD9pZD01HwIFDEFwcGxpY2F0aW9uc2RkAgMPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwU5L2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FwcGxpY2F0aW9ucy9OZXdBcHBsaWNhdGlvbi5hc3B4HwIFD05ldyBBcHBsaWNhdGlvbmRkAgkPFgIfAgUFPC9saT5kAgQPZBYEAgcPDxYEHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRWRpdEFwcGxpY2F0aW9uLmFzcHgfAgUQRWRpdCBBcHBsaWNhdGlvbmRkAgkPFgIfAgUFPC9saT5kAgUPZBYEAgcPDxYEHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRmVlRW5xdWlyeVR5cGVzLmFzcHgfAgUXQXBwbGljYXRpb24gRmVlIEVucXVpcnlkZAIJDxYCHwIFBTwvbGk%2BZAIGD2QWBAIHDw8WBB8DBT0vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0FwcGxpY2F0aW9uRW5xdWlyeS5hc3B4HwIFE0FwcGxpY2F0aW9uIEVucXVpcnlkZAIJDxYCHwIFBTwvbGk%2BZAIHD2QWBgIBDxYCHwIFBTwvdWw%2BZAIDDxYCHwIFBTwvbGk%2BZAIHDw8WBB8DBRdBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9Nx8CBRBDdXN0b21lciBTZXJ2aWNlZGQCCA9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBUAvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQ3VzdG9tZXJTZXJ2aWNlL05ld0N1c3RvbWVyU2VydmljZS5hc3B4HwIFC05ldyBSZXF1ZXN0ZGQCCQ8WAh8CBQU8L2xpPmQCCQ9kFgQCBw8PFgQfAwVBL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0N1c3RvbWVyU2VydmljZS9FZGl0Q3VzdG9tZXJTZXJ2aWNlLmFzcHgfAgUMRWRpdCBSZXF1ZXN0ZGQCCQ8WAh8CBQU8L2xpPmQCCg9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTI1HwIFCUVucXVpcmllc2RkAgsPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwU5L2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlMaXN0cy5hc3B4HwIFDUVucXVpcnkgTGlzdHNkZAIJDxYCHwIFBTwvbGk%2BZAIMD2QWBAIHDw8WBB8DBUgvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvR2VuZXJhbEVucXVpcnkvRW5xdWlyeUxpc3RzLmFzcHg%2FTW9kdWxlQ29kZT1MQVAfAgUTQXBwbGljYXRpb24gRW5xdWlyeWRkAgkPFgIfAgUFPC9saT5kAg0PZBYEAgcPDxYEHwMFSC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5TGlzdHMuYXNweD9Nb2R1bGVDb2RlPUxQQR8CBRBQcm9wZXJ0eSBFbnF1aXJ5ZGQCCQ8WAh8CBQU8L2xpPmQCDg9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTE1HwIFCFBheW1lbnRzZGQCDw9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBTMvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvUGF5bWVudFR5cGVzLmFzcHgfAgULTmV3IFBheW1lbnRkZAIJDxYCHwIFBTwvbGk%2BZAIQD2QWBAIHDw8WBB8DBTEvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvRWRpdFN1Ym1pdC5hc3B4HwIFDEVkaXQgUGF5bWVudGRkAgkPFgIfAgUFPC9saT5kAhEPZBYGAgEPFgIfAgUFPC91bD5kAgMPFgIfAgUFPC9saT5kAgcPDxYEHwMFGEFsdGVybmF0ZU1lbnUuYXNweD9pZD0yOR8CBQdBbmltYWxzZGQCEg9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBS8vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQW5pbWFscy9OZXdBbmltYWwuYXNweB8CBQpOZXcgQW5pbWFsZGQCCQ8WAh8CBQU8L2xpPmQCEw9kFgQCBw8PFgQfAwUwL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FuaW1hbHMvRWRpdEFuaW1hbC5hc3B4HwIFC0VkaXQgQW5pbWFsZGQCCQ8WAh8CBQU8L2xpPmQCFA9kFgQCBw8PFgQfAwUzL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FuaW1hbHMvQW5pbWFsRW5xdWlyeS5hc3B4HwIFDkFuaW1hbCBFbnF1aXJ5ZGQCCQ8WAh8CBQU8L2xpPmQCFQ9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUXQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTQfAgUKQ29udGFjdCBVc2RkAhYPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwUZLi4vV2ViL090aGVyL0NvbnRhY3QuYXNweB8CBQpDb250YWN0IFVzZGQCCQ8WAh8CBQU8L2xpPmQCCQ9kFgoCAQ9kFgJmD2QWBGYPZBYCZg9kFgICAQ8PFgIfAmVkZAIBD2QWAmYPZBYCZg9kFgJmD2QWBGYPZBYCZg8PFgIeCEltYWdlVXJsBS4vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvSW1hZ2VzL3N0YWdlLWJhY2suZ2lmZGQCAQ9kFgJmDw8WAh8LBS4vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvSW1hZ2VzL3N0YWdlLW5leHQuZ2lmZGQCBw8PFgYeCENzc0NsYXNzBRVBbHRlcm5hdGVDb250ZW50UGFuZWweB1Rvb2xUaXBlHgRfIVNCAgJkZAIJDw8WBh8CBUxVbmZvcnR1bmF0ZWx5IGZvciBzZWN1cml0eSByZWFzb25zIHlvdSBhcmUgbm90IGFsbG93ZWQgdG8gc2VlIHRoZXNlIHJlc3VsdHMuHw1lHgdWaXNpYmxlaGRkAgsPZBYCZg9kFgICAQ9kFgRmD2QWAmYPZBYCZg8PFgIfAgUOUGFnZSAxIG9mIDE1NTJkZAIBD2QWBGYPZBYEAgEPDxYGHgtQb3N0QmFja1VybAU1fi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5U3VtbWFyeVZpZXcuYXNweD9QYWdlTnVtYmVyPTEfDQURRmlyc3QgcGFnZSAxIC0gMTAfD2hkZAICDw8WAh8PaGRkAgIPZBYEZg8PFgQfEAU1fi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5U3VtbWFyeVZpZXcuYXNweD9QYWdlTnVtYmVyPTIfDQURTmV4dCBwYWdlIDExIC0gMjBkZAIBDw8WBB8QBTh%2BL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlTdW1tYXJ5Vmlldy5hc3B4P1BhZ2VOdW1iZXI9MTU1Mh8NBRdMYXN0IHBhZ2UgMTU1MTEgLSAxNTUxN2RkAg8PDxYCHw9oZGQCDQ8PFgIfD2hkFgICAQ8PFgIfD2hkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WBAUbY3RsMDAkTWFpbkJvZHlDb250ZW50JGN0bDA1BSdjdGwwMCRNYWluQm9keUNvbnRlbnQkQ2FuY2VsSW1hZ2VCdXR0b24FNmN0bDAwJE1haW5Cb2R5Q29udGVudCRtUGFnaW5nQ29udHJvbCRuZXh0UGFnZUh5cGVyTGluawU2Y3RsMDAkTWFpbkJvZHlDb250ZW50JG1QYWdpbmdDb250cm9sJGxhc3RQYWdlSHlwZXJMaW5rsxsWXhRyztX9FfHq8dOExvmhWvBRMwhjYp8Z6P1gMHE%3D&__VIEWSTATEGENERATOR=8E29E39C&__PREVIOUSPAGE=4PaNsxBqpXkuilo_-ph89w2C2T1vze3W_yIgJReaq2aFng_4V726dboU06g38FgaNTmBcMZAEQDa3VyrvC-PnBn0fe4OsVbnCnyBuyVdDZ_ueuh6AccIPHXcVvihvMrfxI0pLutDPjzvWwtgTm1P6JiFv9rUEyE5ea2DpgESYn81&__EVENTVALIDATION=%2FwEdABzQT348JRSlNd4m1MgkUTR3qIa%2BIWsYrkl8D8CG8imag5bavCSEsoSWCygKWwlVqX3rGqzv5ERVxjfqz4%2BfqEtft8jbFiPqafA5pSJBi56vVTEeH9Q5PFZXyxyFnGlnh5cxh0iT6%2F0wRahLlH1l77px00ER24PCu%2BBSGvZwhruqXeLbpqOzM19RFz1OCeqwhwOA3L40MP%2B6bleSiF8UbE705mBUHbfn9onN%2B7f9GKohaqmvXqlbwzB0EtVFEMaCAesHLdPk4nyK7rRGkpaF%2BNb7GXqZnStqedxcsFEKl%2FMhiGwf7FLERdTaQ5W7f1FGB4JLWnx%2Bl9HPTzeOK5BRW41Cq6wtfrZHMzJBhJjmtahdJyq%2FbyNYf7MP9izB%2FNN9zCmZroue8gInDNwiVxcn5xIHS8nM8UyxjURd5irQ1nPGiLv6VTZ2VhlZ5UVjPN9H1pqESyvNvS8VidPaPFEVAa2VPJ2%2B1l0bQI8hPs06cXr%2Bx%2Fq0O1M2sm272O4Ueq6%2FF6vU4v5YkAk83%2BPTpmmJfn3Jroz87YPeNWcsnVgvrmAyV0LejEHjL%2BnGWnpe9o%2F14ULJcINVu0TaaUAIdkWIU%2B8cjnnlYBwchtN5NL9uGtOaWCKFhxy9R9GAM%2FGbo13FwWc%3D&ctl00%24CSRFToken=2210e92d-3411-4a93-a981-cabbcba3cc14&ctl00%24mWidth=562&ctl00%24mHeight=920'
        res = requests.post(url=url, headers=header, cookies=cookie, data=body)
        r = scrapy.Selector(text=res.content.decode('utf-8'))
        TotalPages = int(r.css('#ctl00_MainBodyContent_mPagingControl_pageNumberLabel::text').extract_first().split()[-1])
        i = 1
        while i <= TotalPages:
            url = f'https://epathway.ipswich.qld.gov.au/ePathway/Production/Web/GeneralEnquiry/EnquirySummaryView.aspx?PageNumber={i}'
            if i == 1:
                yield scrapy.Request(url=url, method='POST', headers=header, cookies=cookie)
            else:
                body = f'__EVENTTARGET=ctl00%24MainBodyContent%24mPagingControl%24pageButton_{i}&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUJNzE5MDc3MzExD2QWAmYPZBYEZg9kFgICDA8WAh4EaHJlZgUQU3R5bGVzLkF6dXJlLmNzc2QCAQ9kFgYCBQ9kFgICBw9kFgQCAg9kFgICAQ88KwANAgAPFgIeC18hRGF0YUJvdW5kZ2QMFCsACAUbMDowLDA6MSwwOjIsMDozLDA6NCwwOjUsMDo2FCsAAhYMHgRUZXh0BQlNYWluIE1lbnUeC05hdmlnYXRlVXJsBSUvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvZGVmYXVsdC5hc3B4HgdFbmFibGVkZx4KU2VsZWN0YWJsZWceCERhdGFQYXRoBSAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0xXR4JRGF0YUJvdW5kZ2QUKwACFgwfAgUMQXBwbGljYXRpb25zHwMFF0FsdGVybmF0ZU1lbnUuYXNweD9pZD01HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdHwdnFCsABQUPMDowLDA6MSwwOjIsMDozFCsAAhYMHwIFD05ldyBBcHBsaWNhdGlvbh8DBTkvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL05ld0FwcGxpY2F0aW9uLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9Ml0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBRBFZGl0IEFwcGxpY2F0aW9uHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRWRpdEFwcGxpY2F0aW9uLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9Ml0vKltwb3NpdGlvbigpPTJdHwdnZBQrAAIWDB8CBRdBcHBsaWNhdGlvbiBGZWUgRW5xdWlyeR8DBTovZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0ZlZUVucXVpcnlUeXBlcy5hc3B4HwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdLypbcG9zaXRpb24oKT0zXR8HZ2QUKwACFgwfAgUTQXBwbGljYXRpb24gRW5xdWlyeR8DBT0vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0FwcGxpY2F0aW9uRW5xdWlyeS5hc3B4HwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTJdLypbcG9zaXRpb24oKT00XR8HZ2QUKwACFgwfAgUQQ3VzdG9tZXIgU2VydmljZR8DBRdBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9Nx8EZx8FZx8GBSAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXR8HZxQrAAMFBzA6MCwwOjEUKwACFgwfAgULTmV3IFJlcXVlc3QfAwVAL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0N1c3RvbWVyU2VydmljZS9OZXdDdXN0b21lclNlcnZpY2UuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXS8qW3Bvc2l0aW9uKCk9MV0fB2dkFCsAAhYMHwIFDEVkaXQgUmVxdWVzdB8DBUEvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQ3VzdG9tZXJTZXJ2aWNlL0VkaXRDdXN0b21lclNlcnZpY2UuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT0zXS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYOHwIFCUVucXVpcmllcx8DBRhBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9MjUeBlRhcmdldAUGX2JsYW5rHwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTRdHwdnFCsABAULMDowLDA6MSwwOjIUKwACFgwfAgUNRW5xdWlyeSBMaXN0cx8DBTkvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvR2VuZXJhbEVucXVpcnkvRW5xdWlyeUxpc3RzLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9NF0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBRNBcHBsaWNhdGlvbiBFbnF1aXJ5HwMFSC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5TGlzdHMuYXNweD9Nb2R1bGVDb2RlPUxBUB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT00XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFEFByb3BlcnR5IEVucXVpcnkfAwVIL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlMaXN0cy5hc3B4P01vZHVsZUNvZGU9TFBBHwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTRdLypbcG9zaXRpb24oKT0zXR8HZ2QUKwACFgwfAgUIUGF5bWVudHMfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTE1HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTVdHwdnFCsAAwUHMDowLDA6MRQrAAIWDB8CBQtOZXcgUGF5bWVudB8DBTMvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvUGF5bWVudFR5cGVzLmFzcHgfBGcfBWcfBgUwLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9NV0vKltwb3NpdGlvbigpPTFdHwdnZBQrAAIWDB8CBQxFZGl0IFBheW1lbnQfAwUxL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL1BheW1lbnRzL0VkaXRTdWJtaXQuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT01XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFB0FuaW1hbHMfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTI5HwRnHwVnHwYFIC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTZdHwdnFCsABAULMDowLDA6MSwwOjIUKwACFgwfAgUKTmV3IEFuaW1hbB8DBS8vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQW5pbWFscy9OZXdBbmltYWwuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9MV0fB2dkFCsAAhYMHwIFC0VkaXQgQW5pbWFsHwMFMC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BbmltYWxzL0VkaXRBbmltYWwuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9Ml0fB2dkFCsAAhYMHwIFDkFuaW1hbCBFbnF1aXJ5HwMFMy9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BbmltYWxzL0FuaW1hbEVucXVpcnkuYXNweB8EZx8FZx8GBTAvKltwb3NpdGlvbigpPTFdLypbcG9zaXRpb24oKT02XS8qW3Bvc2l0aW9uKCk9M10fB2dkFCsAAhYMHwIFCkNvbnRhY3QgVXMfAwUXQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTQfBGcfBWcfBgUgLypbcG9zaXRpb24oKT0xXS8qW3Bvc2l0aW9uKCk9N10fB2cUKwACBQMwOjAUKwACFg4fAgUKQ29udGFjdCBVcx8DBRJPdGhlci9Db250YWN0LmFzcHgfCAUGX2JsYW5rHwRnHwVnHwYFMC8qW3Bvc2l0aW9uKCk9MV0vKltwb3NpdGlvbigpPTddLypbcG9zaXRpb24oKT0xXR8HZ2RkAgQPZBYEAgEPD2QWAh4Hb25jbGljawXiAWphdmFzY3JpcHQ6IHsgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGVNZW51JykuY2xhc3NOYW1lID09PSAnbW9iaWxlTWVudScpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGVNZW51JykuY2xhc3NOYW1lID0gJ21vYmlsZU1lbnUgaGlkZGVuJzsgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlTWVudScpLmNsYXNzTmFtZSA9ICdtb2JpbGVNZW51JzsgIH1kAgMPFgIeC18hSXRlbUNvdW50AhYWLAIBD2QWAgIHDw8WBB8DBSUvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvZGVmYXVsdC5hc3B4HwIFCU1haW4gTWVudWRkAgIPZBYCAgcPDxYEHwMFF0FsdGVybmF0ZU1lbnUuYXNweD9pZD01HwIFDEFwcGxpY2F0aW9uc2RkAgMPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwU5L2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FwcGxpY2F0aW9ucy9OZXdBcHBsaWNhdGlvbi5hc3B4HwIFD05ldyBBcHBsaWNhdGlvbmRkAgkPFgIfAgUFPC9saT5kAgQPZBYEAgcPDxYEHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRWRpdEFwcGxpY2F0aW9uLmFzcHgfAgUQRWRpdCBBcHBsaWNhdGlvbmRkAgkPFgIfAgUFPC9saT5kAgUPZBYEAgcPDxYEHwMFOi9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9BcHBsaWNhdGlvbnMvRmVlRW5xdWlyeVR5cGVzLmFzcHgfAgUXQXBwbGljYXRpb24gRmVlIEVucXVpcnlkZAIJDxYCHwIFBTwvbGk%2BZAIGD2QWBAIHDw8WBB8DBT0vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQXBwbGljYXRpb25zL0FwcGxpY2F0aW9uRW5xdWlyeS5hc3B4HwIFE0FwcGxpY2F0aW9uIEVucXVpcnlkZAIJDxYCHwIFBTwvbGk%2BZAIHD2QWBgIBDxYCHwIFBTwvdWw%2BZAIDDxYCHwIFBTwvbGk%2BZAIHDw8WBB8DBRdBbHRlcm5hdGVNZW51LmFzcHg%2FaWQ9Nx8CBRBDdXN0b21lciBTZXJ2aWNlZGQCCA9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBUAvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQ3VzdG9tZXJTZXJ2aWNlL05ld0N1c3RvbWVyU2VydmljZS5hc3B4HwIFC05ldyBSZXF1ZXN0ZGQCCQ8WAh8CBQU8L2xpPmQCCQ9kFgQCBw8PFgQfAwVBL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0N1c3RvbWVyU2VydmljZS9FZGl0Q3VzdG9tZXJTZXJ2aWNlLmFzcHgfAgUMRWRpdCBSZXF1ZXN0ZGQCCQ8WAh8CBQU8L2xpPmQCCg9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTI1HwIFCUVucXVpcmllc2RkAgsPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwU5L2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlMaXN0cy5hc3B4HwIFDUVucXVpcnkgTGlzdHNkZAIJDxYCHwIFBTwvbGk%2BZAIMD2QWBAIHDw8WBB8DBUgvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvR2VuZXJhbEVucXVpcnkvRW5xdWlyeUxpc3RzLmFzcHg%2FTW9kdWxlQ29kZT1MQVAfAgUTQXBwbGljYXRpb24gRW5xdWlyeWRkAgkPFgIfAgUFPC9saT5kAg0PZBYEAgcPDxYEHwMFSC9lUGF0aHdheS9Qcm9kdWN0aW9uL1dlYi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5TGlzdHMuYXNweD9Nb2R1bGVDb2RlPUxQQR8CBRBQcm9wZXJ0eSBFbnF1aXJ5ZGQCCQ8WAh8CBQU8L2xpPmQCDg9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUYQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTE1HwIFCFBheW1lbnRzZGQCDw9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBTMvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvUGF5bWVudFR5cGVzLmFzcHgfAgULTmV3IFBheW1lbnRkZAIJDxYCHwIFBTwvbGk%2BZAIQD2QWBAIHDw8WBB8DBTEvZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvUGF5bWVudHMvRWRpdFN1Ym1pdC5hc3B4HwIFDEVkaXQgUGF5bWVudGRkAgkPFgIfAgUFPC9saT5kAhEPZBYGAgEPFgIfAgUFPC91bD5kAgMPFgIfAgUFPC9saT5kAgcPDxYEHwMFGEFsdGVybmF0ZU1lbnUuYXNweD9pZD0yOR8CBQdBbmltYWxzZGQCEg9kFgYCBQ8WAh8CBQQ8dWw%2BZAIHDw8WBB8DBS8vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvQW5pbWFscy9OZXdBbmltYWwuYXNweB8CBQpOZXcgQW5pbWFsZGQCCQ8WAh8CBQU8L2xpPmQCEw9kFgQCBw8PFgQfAwUwL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FuaW1hbHMvRWRpdEFuaW1hbC5hc3B4HwIFC0VkaXQgQW5pbWFsZGQCCQ8WAh8CBQU8L2xpPmQCFA9kFgQCBw8PFgQfAwUzL2VQYXRod2F5L1Byb2R1Y3Rpb24vV2ViL0FuaW1hbHMvQW5pbWFsRW5xdWlyeS5hc3B4HwIFDkFuaW1hbCBFbnF1aXJ5ZGQCCQ8WAh8CBQU8L2xpPmQCFQ9kFgYCAQ8WAh8CBQU8L3VsPmQCAw8WAh8CBQU8L2xpPmQCBw8PFgQfAwUXQWx0ZXJuYXRlTWVudS5hc3B4P2lkPTQfAgUKQ29udGFjdCBVc2RkAhYPZBYGAgUPFgIfAgUEPHVsPmQCBw8PFgQfAwUZLi4vV2ViL090aGVyL0NvbnRhY3QuYXNweB8CBQpDb250YWN0IFVzZGQCCQ8WAh8CBQU8L2xpPmQCCQ9kFgoCAQ9kFgJmD2QWBGYPZBYCZg9kFgICAQ8PFgIfAmVkZAIBD2QWAmYPZBYCZg9kFgJmD2QWBGYPZBYCZg8PFgIeCEltYWdlVXJsBS4vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvSW1hZ2VzL3N0YWdlLWJhY2suZ2lmZGQCAQ9kFgJmDw8WAh8LBS4vZVBhdGh3YXkvUHJvZHVjdGlvbi9XZWIvSW1hZ2VzL3N0YWdlLW5leHQuZ2lmZGQCBw8PFgYeCENzc0NsYXNzBRVBbHRlcm5hdGVDb250ZW50UGFuZWweB1Rvb2xUaXBlHgRfIVNCAgJkZAIJDw8WBh8CBUxVbmZvcnR1bmF0ZWx5IGZvciBzZWN1cml0eSByZWFzb25zIHlvdSBhcmUgbm90IGFsbG93ZWQgdG8gc2VlIHRoZXNlIHJlc3VsdHMuHw1lHgdWaXNpYmxlaGRkAgsPZBYCZg9kFgICAQ9kFgRmD2QWAmYPZBYCZg8PFgIfAgUOUGFnZSAxIG9mIDE1NTJkZAIBD2QWBGYPZBYEAgEPDxYGHgtQb3N0QmFja1VybAU1fi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5U3VtbWFyeVZpZXcuYXNweD9QYWdlTnVtYmVyPTEfDQURRmlyc3QgcGFnZSAxIC0gMTAfD2hkZAICDw8WAh8PaGRkAgIPZBYEZg8PFgQfEAU1fi9HZW5lcmFsRW5xdWlyeS9FbnF1aXJ5U3VtbWFyeVZpZXcuYXNweD9QYWdlTnVtYmVyPTIfDQURTmV4dCBwYWdlIDExIC0gMjBkZAIBDw8WBB8QBTh%2BL0dlbmVyYWxFbnF1aXJ5L0VucXVpcnlTdW1tYXJ5Vmlldy5hc3B4P1BhZ2VOdW1iZXI9MTU1Mh8NBRdMYXN0IHBhZ2UgMTU1MTEgLSAxNTUxN2RkAg8PDxYCHw9oZGQCDQ8PFgIfD2hkFgICAQ8PFgIfD2hkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WBAUbY3RsMDAkTWFpbkJvZHlDb250ZW50JGN0bDA1BSdjdGwwMCRNYWluQm9keUNvbnRlbnQkQ2FuY2VsSW1hZ2VCdXR0b24FNmN0bDAwJE1haW5Cb2R5Q29udGVudCRtUGFnaW5nQ29udHJvbCRuZXh0UGFnZUh5cGVyTGluawU2Y3RsMDAkTWFpbkJvZHlDb250ZW50JG1QYWdpbmdDb250cm9sJGxhc3RQYWdlSHlwZXJMaW5rsxsWXhRyztX9FfHq8dOExvmhWvBRMwhjYp8Z6P1gMHE%3D&__VIEWSTATEGENERATOR=8E29E39C&__PREVIOUSPAGE=4PaNsxBqpXkuilo_-ph89w2C2T1vze3W_yIgJReaq2aFng_4V726dboU06g38FgaNTmBcMZAEQDa3VyrvC-PnBn0fe4OsVbnCnyBuyVdDZ_ueuh6AccIPHXcVvihvMrfxI0pLutDPjzvWwtgTm1P6JiFv9rUEyE5ea2DpgESYn81&__EVENTVALIDATION=%2FwEdABzQT348JRSlNd4m1MgkUTR3qIa%2BIWsYrkl8D8CG8imag5bavCSEsoSWCygKWwlVqX3rGqzv5ERVxjfqz4%2BfqEtft8jbFiPqafA5pSJBi56vVTEeH9Q5PFZXyxyFnGlnh5cxh0iT6%2F0wRahLlH1l77px00ER24PCu%2BBSGvZwhruqXeLbpqOzM19RFz1OCeqwhwOA3L40MP%2B6bleSiF8UbE705mBUHbfn9onN%2B7f9GKohaqmvXqlbwzB0EtVFEMaCAesHLdPk4nyK7rRGkpaF%2BNb7GXqZnStqedxcsFEKl%2FMhiGwf7FLERdTaQ5W7f1FGB4JLWnx%2Bl9HPTzeOK5BRW41Cq6wtfrZHMzJBhJjmtahdJyq%2FbyNYf7MP9izB%2FNN9zCmZroue8gInDNwiVxcn5xIHS8nM8UyxjURd5irQ1nPGiLv6VTZ2VhlZ5UVjPN9H1pqESyvNvS8VidPaPFEVAa2VPJ2%2B1l0bQI8hPs06cXr%2Bx%2Fq0O1M2sm272O4Ueq6%2FF6vU4v5YkAk83%2BPTpmmJfn3Jroz87YPeNWcsnVgvrmAyV0LejEHjL%2BnGWnpe9o%2F14ULJcINVu0TaaUAIdkWIU%2B8cjnnlYBwchtN5NL9uGtOaWCKFhxy9R9GAM%2FGbo13FwWc%3D&ctl00%24CSRFToken=2210e92d-3411-4a93-a981-cabbcba3cc14&ctl00%24mWidth=562&ctl00%24mHeight=920'
                yield scrapy.Request(url=url, method='POST', headers=header, cookies=cookie, body=body)
            i += 1

    def parse(self, response, **kwargs):
        for res in response.css('table.ContentPanel tr')[1:]:
            link = 'https://epathway.ipswich.qld.gov.au/ePathway/Production/Web/GeneralEnquiry/'+res.css('td a::attr(href)').extract_first()
            yield scrapy.Request(url=link, callback=self.parsedata, cookies=cookie, headers=header)

    def parsedata(self, response):
        item = dict()
        item['Application Number'] = response.css('#ctl00_MainBodyContent_group_406 .fields .field')[0].css('div::text').extract_first()
        item['Domain'] = 'https://epathway.ipswich.qld.gov.au/'
        item['Suburb'] = ' '.join(response.css('#ctl00_MainBodyContent_group_406 .fields .field')[3].css('div::text').extract_first().split(',')[-1].split()[:-2])
        item['Date of application'] = response.css('#ctl00_MainBodyContent_group_406 .fields .field')[1].css('div::text').extract_first()
        item['Name of applicant'] = response.css('#ctl00_MainBodyContent_group_409 table.ContentPanel tr.ContentPanel td')[-1].css('div::text').extract_first()
        item['Property Address'] = response.css('#ctl00_MainBodyContent_group_406 .fields .field')[3].css('div::text').extract_first()
        item['Application Description'] = response.css('#ctl00_MainBodyContent_group_406 .fields .field')[2].css('div::text').extract_first()
        item['Application Status'] = response.css('#ctl00_MainBodyContent_group_406 .fields .field')[4].css('div::text').extract_first()
        processed.append(item)

    def close(spider, reason):
        airtable_client.insert_records(table_name, processed)


process = CrawlerProcess({
    'USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'
})

process.crawl(ipswich)
process.start()
